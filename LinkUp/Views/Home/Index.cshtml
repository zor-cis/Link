@model HomeViewModel

@{
    ViewData["Title"] = "Home";
}

<div class="float-end">
    <a asp-controller="Publication" asp-action="Create" class="btn btn-outline-secondary position-fixed">Nueva Publicacion</a>
</div>

<div class="text-center">
    <h1 class="display-4">Panel de publicaciones</h1>
    <p>@User.Identity?.Name</p> 
</div>

<div class="row mt-2">



    @if(Model.Publication!.Count == 0)
    {
        <div class="text-center">
            <h5 class="display-5">No hay publicaciones</h5>
        </div>
    }else
    {
        foreach(var item in Model.Publication)
        {
            <div class="card mb-4">
                <div class="card-header">
                    <h5>@item.UserName · @item.CreateAt.ToString("dd/MM/yyyy HH:mm")</h5>
                </div>
                <div class="card-body">
                    <h5 class="card-title">@item.Name</h5>

                    @if (item.PublicationType == (int)PublicationType.Imagen)
                    {
                        <img src="@item.ImageUrl" class="img-fluid rounded mb-3" />
                    }

                    @if (item.PublicationType == (int)PublicationType.Video)
                    {
                        <div class="ratio ratio-16x9 mb-3">
                            <iframe src="@item.VideoUrl" allowfullscreen></iframe>
                        </div>
                    }

                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary btn-sm">Me gusta</button>
                        <button class="btn btn-outline-primary btn-sm">No gusta</button>
                        <button class="btn btn-outline-secondary btn-sm">Comentar</button>
                    </div>
                </div>

                <div class="card-footer">

                    <form method="post" asp-action="AddComment" asp-controller="Comment">
                        <div class="input-group">
                            <input type="text" name="Text" class="form-control" placeholder="Escribe un comentario" required />
                            <input type="hidden" name="IdPublication" value="@item.Id" />
                            <button class="btn btn-primary" type="submit">Enviar</button>
                        </div>
                    </form>

                    <div class="mt-3" style="max-height: 200px; overflow-y: auto;">
                        
                        
                            <div class="border-bottom pb-2 mb-2">
                                <strong>comentarios</strong><br />
                                <span>hola</span>
                            </div>
                        
                    </div>
                </div>
            </div>

        }
    }

</div>


